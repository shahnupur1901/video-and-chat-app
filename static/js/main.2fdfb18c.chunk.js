(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{284:function(e,t,a){},285:function(e,t,a){},317:function(e,t){},319:function(e,t){},484:function(e,t,a){},487:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(12),r=a.n(s),i=(a(284),a.p,a(285),a(51)),o=a(14),l=a(58),j=a(178),u=a(16),m=a(255),d=a(171),b=a.n(d),O=a(2),h=Object(n.createContext)(),x=Object(m.io)("localhost:5000"),p=function(e){var t,a=e.children,c=Object(n.useState)(!1),s=Object(u.a)(c,2),r=s[0],i=s[1],o=Object(n.useState)(!1),m=Object(u.a)(o,2),d=m[0],p=m[1],g=Object(n.useState)(),f=Object(u.a)(g,2),v=f[0],C=f[1],y=Object(n.useState)(""),k=Object(u.a)(y,2),N=k[0],w=k[1],M=Object(n.useState)(""),S=Object(u.a)(M,2),T=S[0],V=S[1],D=Object(n.useState)(),I=Object(u.a)(D,2),A=I[0],H=I[1],U=Object(n.useState)(""),F=Object(u.a)(U,2),W=F[0],P=F[1],E=Object(n.useState)(""),B=Object(u.a)(E,2),J=B[0],q=B[1],R=Object(n.useState)(!1),L=Object(u.a)(R,2),_=L[0],z=L[1],K=Object(n.useState)(""),Y=Object(u.a)(K,2),G=Y[0],Q=Y[1],X=Object(n.useState)(""),Z=Object(u.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)(!1),ae=Object(u.a)(te,2),ne=ae[0],ce=ae[1],se=Object(n.useState)([]),re=Object(u.a)(se,2),ie=re[0],oe=re[1],le=Object(n.useState)([]),je=Object(u.a)(le,2),ue=(je[0],je[1],Object(n.useState)(!1)),me=Object(u.a)(ue,2),de=me[0],be=me[1],Oe=Object(n.useState)(!1),he=Object(u.a)(Oe,2),xe=he[0],pe=he[1],ge=Object(n.useRef)(),fe=Object(n.useRef)(),ve=Object(n.useRef)();function Ce(e){oe((function(t){return[].concat(Object(j.a)(t),[{message:e,fromID:J,from:G==J?N:T}])})),x.emit("sendMessage",{to:G==J?W:G,from:G==J?N:T,fromID:J,message:e})}function ye(){Ce("Message for all users : "+(G==J?N:T)+" has left the video call. You may continue to chat!"),p(!0),ve.current.destroy()}return Object(n.useEffect)((function(){x.on("me",(function(e){return q(e)})),x.on("connectToHost",(function(e){V(e.name),H(e.signal),z(!0),P(e.from)})),x.on("message",(function(e,t,a){oe((function(n){return[].concat(Object(j.a)(n),[{message:a,fromID:t,from:e}])}))}))}),[]),Object(O.jsx)(h.Provider,{value:(t={mute:de,Mute:function(){be(!0),v.getAudioTracks()[0].enabled=!1},Unmute:function(){be(!1),v.getAudioTracks()[0].enabled=!0},mutevid:xe,MuteVid:function(){pe(!0),v.getVideoTracks()[0].enabled=!1},UnmuteVid:function(){pe(!1),v.getVideoTracks()[0].enabled=!0},connectedToHost:ne,sendMessage:Ce,setConnectedToHost:ce,user:W,callAnswered:r,myVideo:ge,peerVideo:fe,stream:v,username:T,hostname:N,setHostName:w,setUserName:V,setCallAnswered:i,callFinished:d,me:J,userSignal:A,receivingCall:_,setReceivingCall:z,setHostID:Q,hostID:G,endMeeting:ye,connectToHost:function(e){var t=new b.a({initiator:!0,trickle:!1,stream:v});Q(e),P(J),t.on("signal",(function(t){x.emit("connectToHost",{host:e,signalData:t,from:J,name:T})})),t.on("stream",(function(e){fe.current.srcObject=e})),x.on("callAnswered",(function(e,a){i(!0),w(a),t.signal(e)})),ve.current=t,ce(!0)}},Object(l.a)(t,"endMeeting",ye),Object(l.a)(t,"answerUser",(function(){i(!0),Q(J);var e=new b.a({initiator:!1,trickle:!1,stream:v});e.on("signal",(function(e){x.emit("answerUser",{signal:e,to:W,name:N,from:J})})),e.on("stream",(function(e){fe.current.srcObject=e})),e.signal(A),ve.current=e})),Object(l.a)(t,"setText",ee),Object(l.a)(t,"setMessages",oe),Object(l.a)(t,"messages",ie),Object(l.a)(t,"text",$),Object(l.a)(t,"setStream",C),t),children:a})},g=a(106),f=a.n(g),v=a(172),C=a(86),y=a.n(C),k=a(169),N=a.n(k),w=a(527),M=a(535),S=a(526),T=a(525);function V(){var e=c.a.useState(!0),t=Object(u.a)(e,2),a=t[0],s=t[1],r=function(){s(!1)};function i(){return o.apply(this,arguments)}function o(){return(o=Object(v.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:{echoCancellation:!0,noiseSuppression:!0}});case 2:return t=e.sent,e.next=5,navigator.mediaDevices.getUserMedia({audio:!0});case 5:return a=e.sent,e.abrupt("return",new MediaStream([a.getTracks()[0],t.getTracks()[0]]));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:t=e.sent,m(t),d.current.srcObject=t,r();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=Object(n.useContext)(h),m=j.setStream,d=(j.mutevid,j.MuteVid,j.UnmuteVid,j.mute,j.receivingCall,j.endMeeting,j.username,j.hostname,j.callAnswered,j.myVideo);j.peerVideo,j.callFinished,j.me,j.stream,j.setCallAnswered,j.call,j.Mute,j.Unmute;return Object(O.jsx)("div",{children:Object(O.jsxs)(M.a,{open:a,onClose:r,"aria-labelledby":"form-dialog-title",children:[Object(O.jsx)(T.a,{id:"form-dialog-title",children:"Select Stream"}),Object(O.jsxs)(S.a,{children:[Object(O.jsx)(w.a,{color:"primary",onClick:function(){return l.apply(this,arguments)},children:Object(O.jsx)(N.a,{})}),Object(O.jsx)(w.a,{color:"primary",onClick:function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){m(e),d.current.srcObject=e})),r()},children:Object(O.jsx)(y.a,{})})]})]})})}var D=a(135),I=a.n(D),A=a(529),H=a(531),U=a(533),F=a(530),W=a(490),P=a(66),E=a(528),B=Object(E.a)((function(e){return{root:{height:"100vh"},video:{width:"600px",height:"450px",backgroundColor:"darkblue"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,8),marginTop:"5%",display:"flex",flexDirection:"column",alignItems:"center"},avatar:{backgroundColor:e.palette.secondary.main},form:{width:"100%"},submit:{margin:e.spacing(1,0,1)},end:{marginTop:"5px"}}})),J=a(537),q=a(532),R=a(87),L=a.n(R);var _=function(){var e=B(),t=Object(n.useContext)(h),a=(t.name,t.callAnswered),c=t.answerUser,s=(t.myVideo,t.peerVideo,t.callFinished,t.me,t.stream,t.setCallAnswered,t.connectToHost,t.setHostID,t.hostID,t.receivingCall);return Object(O.jsx)(O.Fragment,{children:s&&!a?Object(O.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),c()},fullWidth:!0,className:e.submit,children:"Answer"}):null})},z=a(170);var K=function(){var e=B(),t=Object(n.useContext)(h),a=t.sendMessage,c=t.text,s=t.setText;return t.hostname,t.setHostName,t.callAnswered,t.myVideo,t.peerVideo,t.callFinished,t.me,t.stream,t.setCallAnswered,t.answerUser,t.call,t.receivingCall,Object(O.jsxs)(F.a,{item:!0,md:12,className:e.paper,children:[Object(O.jsx)(W.a,{component:"h4",variant:"h6",children:"Enter message"}),Object(O.jsxs)("form",{className:e.form,children:[Object(O.jsx)(q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Message",autoFocus:!0,value:c,onChange:function(e){s(e.target.value)},multiline:!0}),Object(O.jsx)(A.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault(),a(c)},children:"Send"})]})]})};var Y=function(){var e=B(),t=Object(n.useContext)(h),a=t.setHostID,c=t.hostname,s=t.setHostName,r=(t.callAnswered,t.myVideo,t.peerVideo,t.callFinished,t.me),i=(t.stream,t.setCallAnswered,t.answerUser,t.call,t.receivingCall);return Object(O.jsxs)(F.a,{className:e.paper,children:[Object(O.jsx)(J.a,{className:e.avatar,children:Object(O.jsx)(L.a,{})}),Object(O.jsx)(W.a,{component:"h1",variant:"h5",children:"Create a Meeting"}),Object(O.jsxs)("form",{className:e.form,children:[Object(O.jsx)(q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Enter your name",autoFocus:!0,value:c,onChange:function(e){return s(e.target.value)}}),Object(O.jsx)(z.CopyToClipboard,{text:r,children:Object(O.jsx)(A.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){return a(r)},children:"Copy Meet Invite"})}),Object(O.jsx)(A.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){var e=prompt("Enter the recipient's email address."),t={from_name:c,email:e,invite:r};P.a.send("service_dlouy7p","template_29wmiib",t,"user_yKPaoH5guwPv27qcbJe1f").then((function(e){console.log("SUCCESS!",e.status,e.text)}),(function(e){console.log("FAILED...",e)}))},children:"Send Meet Invite"}),Object(O.jsx)(_,{})]}),i?Object(O.jsx)(K,{}):Object(O.jsx)(U.a,{})]})},G=a(256);a(486),a(484);var Q=function(){B();var e=Object(n.useContext)(h),t=e.connectedToHost,a=e.messages,c=(e.senders,e.sendMessage,e.message,e.setMessage,e.hostname,e.setHostName,e.callAnswered,e.myVideo,e.peerVideo,e.callFinished,e.me),s=(e.stream,e.setCallAnswered,e.answerUser,e.call,e.receivingCall);return Object(O.jsxs)(G.a,{children:[t||s?Object(O.jsx)("h2",{children:"Chatbox"}):Object(O.jsx)("p",{}),a.map((function(e,t){var a=!1;return e.fromID==c&&(a=!0),a?Object(O.jsxs)("div",{className:"messageContainer justifyEnd",children:[Object(O.jsx)("p",{className:"sentText pr-10",children:e.from}),Object(O.jsx)("div",{className:"messageBox backgroundBlue",children:Object(O.jsx)("p",{className:"messageText colorWhite",children:e.message})})]}):Object(O.jsxs)("div",{className:"messageContainer justifyStart",children:[Object(O.jsx)("div",{className:"messageBox backgroundViolet",children:Object(O.jsx)("p",{className:"messageText colorDark",children:e.message})}),Object(O.jsx)("p",{className:"sentText pl-10 ",children:e.from})]})}))]})},X=a(133),Z=a.n(X),$=a(134),ee=a.n($);function te(){var e=B(),t=(Object(o.f)(),Object(n.useContext)(h)),a=t.mutevid,c=t.MuteVid,s=t.UnmuteVid,r=t.mute,i=(t.receivingCall,t.endMeeting),l=t.username,j=t.hostname,u=t.callAnswered,m=t.myVideo,d=t.peerVideo,b=t.callFinished,x=(t.me,t.stream),p=(t.setCallAnswered,t.call,t.Mute),g=t.Unmute;return Object(O.jsxs)(F.a,{container:!0,component:"main",className:e.root,children:[Object(O.jsx)(V,{}),Object(O.jsx)(H.a,{}),Object(O.jsx)(F.a,{item:!0,xs:!1,sm:3,md:2,className:e.image}),x&&Object(O.jsxs)(F.a,{className:e.paper,children:[Object(O.jsx)(W.a,{variant:"h5",gutterBottom:!0,children:j}),Object(O.jsx)("video",{playsInline:!0,muted:!0,ref:m,autoPlay:!0,className:e.video}),Object(O.jsx)(Q,{})]}),u&&!b?Object(O.jsxs)(F.a,{className:e.paper,children:[Object(O.jsx)(W.a,{variant:"h5",gutterBottom:!0,children:l}),Object(O.jsx)("video",{playsInline:!0,ref:d,autoPlay:!0,className:e.video}),Object(O.jsx)(A.a,{variant:"contained",color:"primary",onClick:i,className:e.end,children:"Leave Meeting"}),r?Object(O.jsx)(w.a,{color:"primary",onClick:g,children:Object(O.jsx)(Z.a,{})}):Object(O.jsx)(w.a,{color:"primary",onClick:p,children:Object(O.jsx)(ee.a,{})}),a?Object(O.jsx)(w.a,{color:"primary",onClick:s,children:Object(O.jsx)(I.a,{})}):Object(O.jsx)(w.a,{color:"primary",onClick:c,children:Object(O.jsx)(y.a,{})}),u?Object(O.jsx)(K,{}):Object(O.jsx)(U.a,{})]}):Object(O.jsx)(Y,{})]})}var ae=function(){var e=B(),t=Object(n.useContext)(h),a=t.connectedToHost,c=(t.setConnectedToHost,t.setUserName),s=t.username,r=(t.callAnswered,t.myVideo,t.peerVideo,t.callFinished,t.me,t.stream,t.setCallAnswered,t.connectToHost),i=t.setHostID,o=t.hostID;return t.receivingCall,t.answerUser,Object(O.jsxs)(F.a,{className:e.paper,children:[Object(O.jsx)(J.a,{className:e.avatar,children:Object(O.jsx)(L.a,{})}),Object(O.jsx)(W.a,{component:"h1",variant:"h5",children:"Join a Meeting"}),Object(O.jsxs)("form",{className:e.form,children:[Object(O.jsx)(q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Enter your name",autoFocus:!0,value:s,onChange:function(e){return c(e.target.value)}}),Object(O.jsx)(q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Enter meeting invite",autoFocus:!0,onChange:function(e){return i(e.target.value)}}),Object(O.jsx)(A.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",value:o,onClick:function(e){e.preventDefault(),r(o)},className:e.submit,children:"Join Meeting"})]}),a?Object(O.jsx)(K,{}):Object(O.jsx)(U.a,{})]})};function ne(){var e=B(),t=Object(n.useContext)(h),a=t.mutevid,c=t.MuteVid,s=t.UnmuteVid,r=t.mute,i=t.connectedToHost,l=t.endMeeting,j=t.username,u=t.hostname,m=t.callAnswered,d=t.myVideo,b=t.peerVideo,x=t.callFinished,p=t.stream,g=(t.call,t.connectToHost,t.receivingCall,t.Mute),f=t.Unmute;Object(o.f)();return Object(O.jsxs)(F.a,{container:!0,component:"main",className:e.root,children:[Object(O.jsx)(V,{}),Object(O.jsx)(H.a,{}),Object(O.jsx)(F.a,{item:!0,xs:!1,sm:3,md:2,className:e.image}),p&&Object(O.jsxs)(F.a,{className:e.paper,children:[Object(O.jsx)(W.a,{variant:"h5",gutterBottom:!0,children:j}),Object(O.jsx)("video",{playsInline:!0,muted:!0,ref:d,autoPlay:!0,className:e.video}),Object(O.jsx)(Q,{})]}),m&&!x?Object(O.jsxs)(F.a,{className:e.paper,children:[Object(O.jsx)(W.a,{variant:"h5",gutterBottom:!0,children:u||"Host"}),Object(O.jsx)("video",{playsInline:!0,ref:b,autoPlay:!0,className:e.video}),Object(O.jsx)(A.a,{variant:"contained",color:"primary",onClick:l,className:e.end,children:"Leave Meeting"}),r?Object(O.jsx)(w.a,{color:"primary",onClick:f,children:Object(O.jsx)(Z.a,{})}):Object(O.jsx)(w.a,{color:"primary",onClick:g,children:Object(O.jsx)(ee.a,{})}),a?Object(O.jsx)(w.a,{color:"primary",onClick:s,children:Object(O.jsx)(I.a,{})}):Object(O.jsx)(w.a,{color:"primary",onClick:c,children:Object(O.jsx)(y.a,{})}),i?Object(O.jsx)(K,{}):Object(O.jsx)(U.a,{})]}):Object(O.jsx)(ae,{})]})}var ce=a(522),se=Object(E.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function re(){var e=se(),t=Object(o.f)();return Object(O.jsxs)(F.a,{container:!0,component:"main",className:e.root,children:[Object(O.jsx)(H.a,{}),Object(O.jsx)(F.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(O.jsx)(F.a,{item:!0,xs:12,sm:8,md:5,component:ce.a,elevation:6,square:!0,children:Object(O.jsxs)("div",{className:e.paper,children:[Object(O.jsx)(J.a,{className:e.avatar,children:Object(O.jsx)(L.a,{})}),Object(O.jsx)(W.a,{component:"h1",variant:"h5",children:"Welcome! Select your action."}),Object(O.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(O.jsx)(A.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){t.push("/CreateMeeting"),t.go(0)},children:"Create a Meeting"}),Object(O.jsx)(A.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){t.push("/JoinMeeting"),t.go(0)},children:"Join a Meeting"})]})]})})]})}var ie=function(){return Object(O.jsx)(i.a,{children:Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{path:"/",exact:!0,component:re}),Object(O.jsxs)(p,{children:[Object(O.jsx)(o.a,{path:"/CreateMeeting",exact:!0,component:te}),Object(O.jsx)(o.a,{path:"/JoinMeeting",exact:!0,component:ne})]})]})})},oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,539)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(ie,{})}),document.getElementById("root")),oe()}},[[487,1,2]]]);
//# sourceMappingURL=main.2fdfb18c.chunk.js.map