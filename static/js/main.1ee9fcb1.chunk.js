(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{275:function(e,t,a){},276:function(e,t,a){},308:function(e,t){},310:function(e,t){},474:function(e,t,a){},477:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(12),r=a.n(s),i=(a(275),a.p,a(276),a(50)),o=a(14),l=a(63),j=a(171),m=a(19),u=a(245),d=a(165),b=a.n(d),O=a(2),h=Object(n.createContext)(),x=Object(u.io)("https://video-and-chat-app.herokuapp.com/"),g=function(e){var t,a=e.children,c=Object(n.useState)(!1),s=Object(m.a)(c,2),r=s[0],i=s[1],o=Object(n.useState)(!1),u=Object(m.a)(o,2),d=u[0],g=u[1],p=Object(n.useState)(),f=Object(m.a)(p,2),v=f[0],C=f[1],y=Object(n.useState)(""),N=Object(m.a)(y,2),k=N[0],w=N[1],M=Object(n.useState)(""),S=Object(m.a)(M,2),T=S[0],V=S[1],I=Object(n.useState)(),H=Object(m.a)(I,2),D=H[0],A=H[1],F=Object(n.useState)(""),U=Object(m.a)(F,2),W=U[0],P=U[1],E=Object(n.useState)(""),B=Object(m.a)(E,2),J=B[0],q=B[1],R=Object(n.useState)(!1),L=Object(m.a)(R,2),_=L[0],z=L[1],K=Object(n.useState)(""),Y=Object(m.a)(K,2),G=Y[0],Q=Y[1],X=Object(n.useState)(""),Z=Object(m.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)(!1),ae=Object(m.a)(te,2),ne=ae[0],ce=ae[1],se=Object(n.useState)([]),re=Object(m.a)(se,2),ie=re[0],oe=re[1],le=Object(n.useState)([]),je=Object(m.a)(le,2),me=(je[0],je[1],Object(n.useState)(!1)),ue=Object(m.a)(me,2),de=ue[0],be=ue[1],Oe=Object(n.useState)(!1),he=Object(m.a)(Oe,2),xe=he[0],ge=he[1],pe=Object(n.useRef)(),fe=Object(n.useRef)(),ve=Object(n.useRef)();function Ce(e){oe((function(t){return[].concat(Object(j.a)(t),[{message:e,fromID:J,from:G==J?k:T}])})),x.emit("sendMessage",{to:G==J?W:G,from:G==J?k:T,fromID:J,message:e})}function ye(){Ce((G==J?k:T)+" has left the video call. You may continue to chat!"),g(!0),ve.current.destroy()}return Object(n.useEffect)((function(){x.on("me",(function(e){return q(e)})),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){C(e),pe.current.srcObject=e})),x.on("connectToHost",(function(e){V(e.name),A(e.signal),z(!0),P(e.from)})),x.on("message",(function(e,t,a){oe((function(n){return[].concat(Object(j.a)(n),[{message:a,fromID:t,from:e}])}))}))}),[]),Object(O.jsx)(h.Provider,{value:(t={mute:de,Mute:function(){be(!0),v.getAudioTracks()[0].enabled=!1},Unmute:function(){be(!1),v.getAudioTracks()[0].enabled=!0},mutevid:xe,MuteVid:function(){ge(!0),v.getVideoTracks()[0].enabled=!1},UnmuteVid:function(){ge(!1),v.getVideoTracks()[0].enabled=!0},connectedToHost:ne,sendMessage:Ce,setConnectedToHost:ce,user:W,callAnswered:r,myVideo:pe,peerVideo:fe,stream:v,username:T,hostname:k,setHostName:w,setUserName:V,setCallAnswered:i,callFinished:d,me:J,userSignal:D,receivingCall:_,setReceivingCall:z,setHostID:Q,hostID:G,endMeeting:ye,connectToHost:function(e){var t=new b.a({initiator:!0,trickle:!1,stream:v});Q(e),P(J),t.on("signal",(function(t){x.emit("connectToHost",{host:e,signalData:t,from:J,name:T})})),t.on("stream",(function(e){fe.current.srcObject=e})),x.on("callAnswered",(function(e,a){i(!0),w(a),t.signal(e)})),ve.current=t,ce(!0)}},Object(l.a)(t,"endMeeting",ye),Object(l.a)(t,"answerUser",(function(){i(!0),Q(J);var e=new b.a({initiator:!1,trickle:!1,stream:v});e.on("signal",(function(e){x.emit("answerUser",{signal:e,to:W,name:k,from:J})})),e.on("stream",(function(e){fe.current.srcObject=e})),e.signal(D),ve.current=e})),Object(l.a)(t,"setText",ee),Object(l.a)(t,"setMessages",oe),Object(l.a)(t,"messages",ie),Object(l.a)(t,"text",$),t),children:a})},p=a(130),f=a.n(p),v=a(129),C=a.n(v),y=a(507),N=a(512),k=a(515),w=a(509),M=a(510),S=a(60),T=a(505),V=Object(T.a)((function(e){return{root:{height:"100vh"},video:{width:"550px"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(10,10),marginTop:"5%",display:"flex",flexDirection:"column",alignItems:"center"},avatar:{backgroundColor:e.palette.secondary.main},form:{width:"100%"},submit:{margin:e.spacing(1,0,1)},end:{marginTop:"5px"}}})),I=a(516),H=a(514),D=a(79),A=a.n(D);var F=function(){var e=V(),t=Object(n.useContext)(h),a=(t.name,t.callAnswered),c=t.answerUser,s=(t.myVideo,t.peerVideo,t.callFinished,t.me,t.stream,t.setCallAnswered,t.connectToHost,t.setHostID,t.hostID,t.receivingCall);return Object(O.jsx)(O.Fragment,{children:s&&!a?Object(O.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),c()},fullWidth:!0,className:e.submit,children:"Answer"}):null})},U=a(164);var W=function(){var e=V(),t=Object(n.useContext)(h),a=t.sendMessage,c=t.text,s=t.setText;return t.hostname,t.setHostName,t.callAnswered,t.myVideo,t.peerVideo,t.callFinished,t.me,t.stream,t.setCallAnswered,t.answerUser,t.call,t.receivingCall,Object(O.jsxs)(w.a,{item:!0,md:12,className:e.paper,children:[Object(O.jsx)(M.a,{component:"h4",variant:"h6",children:"Enter message"}),Object(O.jsxs)("form",{className:e.form,children:[Object(O.jsx)(H.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Message",autoFocus:!0,value:c,onChange:function(e){s(e.target.value)},multiline:!0}),Object(O.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault(),a(c)},children:"Send"})]})]})};var P=function(){var e=V(),t=Object(n.useContext)(h),a=t.setHostID,c=t.hostname,s=t.setHostName,r=(t.callAnswered,t.myVideo,t.peerVideo,t.callFinished,t.me),i=(t.stream,t.setCallAnswered,t.answerUser,t.call,t.receivingCall);return Object(O.jsxs)(w.a,{className:e.paper,children:[Object(O.jsx)(I.a,{className:e.avatar,children:Object(O.jsx)(A.a,{})}),Object(O.jsx)(M.a,{component:"h1",variant:"h5",children:"Create a Meeting"}),Object(O.jsxs)("form",{className:e.form,children:[Object(O.jsx)(H.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Enter your name",autoFocus:!0,value:c,onChange:function(e){return s(e.target.value)}}),Object(O.jsx)(U.CopyToClipboard,{text:r,children:Object(O.jsx)(y.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){return a(r)},children:"Copy Meet Invite"})}),Object(O.jsx)(y.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){var e=prompt("Enter the recipient's email address."),t={from_name:c,email:e,invite:r};S.a.send("service_dlouy7p","template_29wmiib",t,"user_yKPaoH5guwPv27qcbJe1f").then((function(e){console.log("SUCCESS!",e.status,e.text)}),(function(e){console.log("FAILED...",e)}))},children:"Send Meet Invite"}),Object(O.jsx)(F,{})]}),i?Object(O.jsx)(W,{}):Object(O.jsx)(k.a,{})]})},E=a(246);a(476),a(474);var B=function(){V();var e=Object(n.useContext)(h),t=e.connectedToHost,a=e.messages,c=(e.senders,e.sendMessage,e.message,e.setMessage,e.hostname,e.setHostName,e.callAnswered,e.myVideo,e.peerVideo,e.callFinished,e.me),s=(e.stream,e.setCallAnswered,e.answerUser,e.call,e.receivingCall);return Object(O.jsxs)(E.a,{children:[t||s?Object(O.jsx)("h2",{children:"Chatbox"}):Object(O.jsx)("p",{}),a.map((function(e,t){var a=!1;return e.fromID==c&&(a=!0),a?Object(O.jsxs)("div",{className:"messageContainer justifyEnd",children:[Object(O.jsx)("p",{className:"sentText pr-10",children:e.from}),Object(O.jsx)("div",{className:"messageBox backgroundBlue",children:Object(O.jsx)("p",{className:"messageText colorWhite",children:e.message})})]}):Object(O.jsxs)("div",{className:"messageContainer justifyStart",children:[Object(O.jsx)("div",{className:"messageBox backgroundViolet",children:Object(O.jsx)("p",{className:"messageText colorDark",children:e.message})}),Object(O.jsx)("p",{className:"sentText pl-10 ",children:e.from})]})}))]})},J=a(127),q=a.n(J),R=a(128),L=a.n(R),_=a(513);function z(){var e=V(),t=(Object(o.f)(),Object(n.useContext)(h)),a=t.mutevid,c=t.MuteVid,s=t.UnmuteVid,r=t.mute,i=(t.receivingCall,t.endMeeting),l=t.username,j=t.hostname,m=t.callAnswered,u=t.myVideo,d=t.peerVideo,b=t.callFinished,x=(t.me,t.stream),g=(t.setCallAnswered,t.call,t.Mute),p=t.Unmute;return Object(O.jsxs)(w.a,{container:!0,component:"main",className:e.root,children:[Object(O.jsx)(N.a,{}),Object(O.jsx)(w.a,{item:!0,xs:!1,sm:3,md:2,className:e.image}),x&&Object(O.jsxs)(w.a,{className:e.paper,children:[Object(O.jsx)(M.a,{variant:"h5",gutterBottom:!0,children:j}),Object(O.jsx)("video",{playsInline:!0,muted:!0,ref:u,autoPlay:!0,className:e.video}),Object(O.jsx)(B,{})]}),m&&!b?Object(O.jsxs)(w.a,{className:e.paper,children:[Object(O.jsx)(M.a,{variant:"h5",gutterBottom:!0,children:l}),Object(O.jsx)("video",{playsInline:!0,ref:d,autoPlay:!0,className:e.video}),Object(O.jsx)(y.a,{variant:"contained",color:"primary",onClick:i,className:e.end,children:"Leave Meeting"}),r?Object(O.jsx)(_.a,{color:"primary",onClick:p,children:Object(O.jsx)(q.a,{})}):Object(O.jsx)(_.a,{color:"primary",onClick:g,children:Object(O.jsx)(L.a,{})}),a?Object(O.jsx)(_.a,{color:"primary",onClick:s,children:Object(O.jsx)(C.a,{})}):Object(O.jsx)(_.a,{color:"primary",onClick:c,children:Object(O.jsx)(f.a,{})}),m?Object(O.jsx)(W,{}):Object(O.jsx)(k.a,{})]}):Object(O.jsx)(P,{})]})}var K=function(){var e=V(),t=Object(n.useContext)(h),a=t.connectedToHost,c=(t.setConnectedToHost,t.setUserName),s=t.username,r=(t.callAnswered,t.myVideo,t.peerVideo,t.callFinished,t.me,t.stream,t.setCallAnswered,t.connectToHost),i=t.setHostID,o=t.hostID;return t.receivingCall,t.answerUser,Object(O.jsxs)(w.a,{className:e.paper,children:[Object(O.jsx)(I.a,{className:e.avatar,children:Object(O.jsx)(A.a,{})}),Object(O.jsx)(M.a,{component:"h1",variant:"h5",children:"Join a Meeting"}),Object(O.jsxs)("form",{className:e.form,children:[Object(O.jsx)(H.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Enter your name",autoFocus:!0,value:s,onChange:function(e){return c(e.target.value)}}),Object(O.jsx)(H.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Enter meeting invite",autoFocus:!0,onChange:function(e){return i(e.target.value)}}),Object(O.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",value:o,onClick:function(e){e.preventDefault(),r(o)},className:e.submit,children:"Join Meeting"})]}),a?Object(O.jsx)(W,{}):Object(O.jsx)(k.a,{})]})};function Y(){var e=V(),t=Object(n.useContext)(h),a=t.mutevid,c=t.MuteVid,s=t.UnmuteVid,r=t.mute,i=t.connectedToHost,l=t.endMeeting,j=t.username,m=t.hostname,u=t.callAnswered,d=t.myVideo,b=t.peerVideo,x=t.callFinished,g=t.stream,p=(t.call,t.connectToHost,t.receivingCall,t.Mute),v=t.Unmute;Object(o.f)();return Object(O.jsxs)(w.a,{container:!0,component:"main",className:e.root,children:[Object(O.jsx)(N.a,{}),Object(O.jsx)(w.a,{item:!0,xs:!1,sm:3,md:2,className:e.image}),g&&Object(O.jsxs)(w.a,{className:e.paper,children:[Object(O.jsx)(M.a,{variant:"h5",gutterBottom:!0,children:j}),Object(O.jsx)("video",{playsInline:!0,muted:!0,ref:d,autoPlay:!0,className:e.video}),Object(O.jsx)(B,{})]}),u&&!x?Object(O.jsxs)(w.a,{className:e.paper,children:[Object(O.jsx)(M.a,{variant:"h5",gutterBottom:!0,children:m||"Host"}),Object(O.jsx)("video",{playsInline:!0,ref:b,autoPlay:!0,className:e.video}),Object(O.jsx)(y.a,{variant:"contained",color:"primary",onClick:l,className:e.end,children:"Leave Meeting"}),r?Object(O.jsx)(_.a,{color:"primary",onClick:v,children:Object(O.jsx)(q.a,{})}):Object(O.jsx)(_.a,{color:"primary",onClick:p,children:Object(O.jsx)(L.a,{})}),a?Object(O.jsx)(_.a,{color:"primary",onClick:s,children:Object(O.jsx)(C.a,{})}):Object(O.jsx)(_.a,{color:"primary",onClick:c,children:Object(O.jsx)(f.a,{})}),i?Object(O.jsx)(W,{}):Object(O.jsx)(k.a,{})]}):Object(O.jsx)(K,{})]})}var G=a(511),Q=Object(T.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function X(){var e=Q(),t=Object(o.f)();return Object(O.jsxs)(w.a,{container:!0,component:"main",className:e.root,children:[Object(O.jsx)(N.a,{}),Object(O.jsx)(w.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(O.jsx)(w.a,{item:!0,xs:12,sm:8,md:5,component:G.a,elevation:6,square:!0,children:Object(O.jsxs)("div",{className:e.paper,children:[Object(O.jsx)(I.a,{className:e.avatar,children:Object(O.jsx)(A.a,{})}),Object(O.jsx)(M.a,{component:"h1",variant:"h5",children:"Welcome! Select your action."}),Object(O.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(O.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){t.push("/CreateMeeting"),t.go(0)},children:"Create a Meeting"}),Object(O.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){t.push("/JoinMeeting"),t.go(0)},children:"Join a Meeting"})]})]})})]})}var Z=function(){return Object(O.jsx)(i.a,{children:Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{path:"/",exact:!0,component:X}),Object(O.jsxs)(g,{children:[Object(O.jsx)(o.a,{path:"/CreateMeeting",exact:!0,component:z}),Object(O.jsx)(o.a,{path:"/JoinMeeting",exact:!0,component:Y})]})]})})},$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,519)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(Z,{})}),document.getElementById("root")),$()}},[[477,1,2]]]);
//# sourceMappingURL=main.1ee9fcb1.chunk.js.map